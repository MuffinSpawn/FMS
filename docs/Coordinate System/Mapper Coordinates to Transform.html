<HTML>
<HEAD>
<TITLE>Coordinate System.lvlib:Mapper Coordinates to Transform.vi</TITLE>
<META NAME="Author" CONTENT="">
<META NAME="GENERATOR" CONTENT="G Development Environment">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<A NAME="Coordinate System.lvlib:Mapper Coordinates to Transform.vi"></A><H2>Coordinate System.lvlib:Mapper Coordinates to Transform.vi</H2>
<P>This VI creates a 4x4 transform matrix from the specified angular and linear offsets of the Mapper Coordinate System with respect to the Detector Solenoid Coordinate System (DSCS). The mapper angle (theta) and linear position (z) are used as relative displacements, with the option of flipping the z-axis (and the x-axis) if the mapper z increases as the DS z decreases. This puts the DS z-axis in the same orientation as that of the Mapper and then applies the rotational and linear offsets.</P>
<P></P>
<P>Implied in these choices are that (after flipping axes if necessary)  1) the x-axis of the Mapper system is defined as being rotated by the negative of the  Mapper home theta with respect to the DS x-axis, and 2) the Mapper origin is translated along the z-axis by the negative of the Mapper home z with respect to the DS origin. Therefore, any arbitrary DS coordinate is rotated and translated by the Mapper home theta and z respectively to convert them into the Mapper coordinate system.</P>
<P></P>
<P>When used with the DSCS to (MCS) VI, the transform matrix takes a list of cylindrical Detector Solenoid Coordinate System vectors (row vector matrix), converts them to Cartesian coordinates, transforms them to MCS coordinates, and then converts them back to cylindrical coordinates.</P>
<P><IMG SRC="images/Mapper Coordinates to Transformc.png" ALT="Coordinate System.lvlib:Mapper Coordinates to Transform.vi"></P>
<P><IMG SRC="images/Mapper Coordinates to Transformp.png" ALT="Coordinate System.lvlib:Mapper Coordinates to Transform.vi"></P>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/cnclst.png" ALT="cnclst"></P>
</TD>
<TD>
<B>Mapper Coordinates</B> <P>2D mapper position coordinates (theta, z).</P>
</TD>
</TR>
</Table>
<UL>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/cdbl.png" ALT="cdbl"></P>
</TD>
<TD>
<B>theta (deg)</B> </TD>
</TR>
</Table>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/cdbl.png" ALT="cdbl"></P>
</TD>
<TD>
<B>z (mm)</B> </TD>
</TR>
</Table>
</UL>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/cbool.png" ALT="cbool"></P>
</TD>
<TD>
<B>Flip z-axis</B> <P>If True, the direction of the z axis of the mapper coordinate system is assumed to be opposite that of the direction of the detector solenoid coordinate system. Otherwise, the two z-axes point in the same direction.</P>
</TD>
</TR>
</Table>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/i2ddbl.png" ALT="i2ddbl"></P>
</TD>
<TD>
<B>Transform Matrix</B> <P>When applied to a column 4-vector matrix in the Detector Solenoid Coordinate System, (rho, theta, z), the vector will be converted to the Mapper Coordinate System, also (rho, theta, z).</P>
</TD>
</TR>
</Table>
<UL>
<Table>
<TR valign=TOP>
<TD>
<P><IMG SRC="images/idbl.png" ALT="idbl"></P>
</TD>
<TD>
<B>Real Matrix Element</B> </TD>
</TR>
</Table>
</UL>
<P><IMG SRC="images/Mapper Coordinates to Transformd.png" ALT="Coordinate System.lvlib:Mapper Coordinates to Transform.vi"></P>
<HR>
<H3>Position in Hierarchy</H3>
<P><IMG SRC="images/Mapper Coordinates to Transformh.png" ALT="Coordinate System.lvlib:Mapper Coordinates to Transform.vi"></P>
</BODY>
</HTML>
